<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Val Stacey">
<meta name="dcterms.date" content="2025-09-07">

<title>PHW251 Problem Set 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="vs_problem_set_2_files/libs/clipboard/clipboard.min.js"></script>
<script src="vs_problem_set_2_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="vs_problem_set_2_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="vs_problem_set_2_files/libs/quarto-html/popper.min.js"></script>
<script src="vs_problem_set_2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="vs_problem_set_2_files/libs/quarto-html/anchor.min.js"></script>
<link href="vs_problem_set_2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="vs_problem_set_2_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="vs_problem_set_2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="vs_problem_set_2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="vs_problem_set_2_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PHW251 Problem Set 2</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Val Stacey </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 7, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div style="page-break-after: always;"></div>
<section id="question-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1">Question 1</h3>
<p>Use the function Sys.Date() to get the current date. Save it in your environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>todays_date <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use the class() function to see what kind of object your date is, and then use the typeof() function to see how it is stored in R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(todays_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(todays_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<p>Why is your saved object both a Date and a double? HINT: try using as.numeric() on the object and think about what that number means.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(todays_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20338</code></pre>
</div>
</div>
<p><strong>This paragraph was provided in the .qmd, and I don’t have anything to add. I think it answers the question well:</strong></p>
<p>Dates in R are stored as the number of days before or after 1/1/1970, which is just a number (an integer stored as a double). Because the number came from Sys.Date(), R knows it is not just a normal number and instead displays it as a date.</p>
<div style="page-break-after: always;"></div>
<p>Look up the documentation for the lubridate function <code>wday</code> (short for weekday). Load the lubridate library and then pass your date object to <code>wday()</code> to get the day of the week <em>as an abbreviated name</em> e.g.&nbsp;“Sun” and “Mon”. You will need to pass the function a second argument to make this happen. Save the result in your environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>?lubridate<span class="sc">::</span><span class="fu">wday</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>wday</code> arguments:</p>
<p>wday( x, label = FALSE, abbr = TRUE, week_start = getOption(“lubridate.week.start”, 7), locale = Sys.getlocale(“LC_TIME”) )</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>current_wday <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">wday</span>(todays_date, <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>current_wday</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Run this code chunk to save a vector of the seven days of the week. The levels() function returns a vector containing the names of all the levels of a factor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>days <span class="ot">&lt;-</span> <span class="fu">levels</span>(<span class="fu">wday</span>(<span class="fu">Sys.Date</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>days</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sun" "Mon" "Tue" "Wed" "Thu" "Fri" "Sat"</code></pre>
</div>
</div>
<p>Subset the vector of days to get a vector of <em>weekdays only</em> (Mon-Fri). You can pull out values from a vector by using a sequence of positions/indexes inside square brackets (see the lecture “Data Types and Objects in R”). Save the list of weekdays as a new object in your environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>weekdays <span class="ot">&lt;-</span> days[<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>weekdays </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mon" "Tue" "Wed" "Thu" "Fri"</code></pre>
</div>
</div>
<p>Is the current day you saved in the current_wday chunk above a weekday? Check using the %in% operator. Also check if the current day is in the days vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>current_wday <span class="sc">%in%</span> weekdays</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>current_wday <span class="sc">%in%</span> days</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="question-2" class="level3">
<h3 class="anchored" data-anchor-id="question-2">Question 2</h3>
<p>if/else, vector math, logical ops</p>
<p>Run this chunk as-is to load a dataset of <a href="https://gml.noaa.gov/ccgg/trends/data.html">Mauna Loa carbon dioxide records</a> and plot CO2 levels over time. Importing and plotting data will be covered in an upcoming lecture–the graph is just for context.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the csv file and save it as a data frame in the environment</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>co2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"co2_mm_mlo.csv"</span>, <span class="at">skip =</span> <span class="dv">51</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">row.names =</span> <span class="cn">NULL</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># label the columns</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(co2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"year"</span>,<span class="st">"month"</span>,<span class="st">"date"</span>,<span class="st">"average"</span>,<span class="st">"interpolated"</span>,<span class="st">"trend"</span>,<span class="st">"ndays"</span>, <span class="st">"UNK"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data graphically</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> co2<span class="sc">$</span>date, <span class="at">y =</span> co2<span class="sc">$</span>average, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="fl">0.1</span>, </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Date"</span>, <span class="at">ylab =</span> <span class="st">"Average CO2 (ppm)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="vs_problem_set_2_files/figure-html/co2_import-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># view the last few rows of the data in a table</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(co2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    year month     date average interpolated trend ndays  UNK
756 2021     2 2021.125  416.75       415.93    28  1.02 0.37
757 2021     3 2021.208  417.64       416.14    28  0.86 0.31
758 2021     4 2021.292  419.05       416.23    24  1.12 0.44
759 2021     5 2021.375  419.13       415.71    28  0.90 0.33
760 2021     6 2021.458  418.94       416.58    28  0.65 0.23
761 2021     7 2021.542  416.96       416.58    30  0.72 0.25</code></pre>
</div>
</div>
<p>Before the industrial revolution, the global concentration of carbon dioxide was about <a href="https://www.climate.gov/news-features/understanding-climate/climate-change-atmospheric-carbon-dioxide">280 parts per million</a>. Let’s see if we can express CO2 levels over time as a percentage of pre-industrial levels.</p>
<p>Start by extracting the average CO2 level column from the data frame. You can run this chunk as-is, since we haven’t covered data frames in detail yet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pull the "average" column out of the data as a vector</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>avg_co2 <span class="ot">&lt;-</span> co2<span class="sc">$</span>average</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># this is another way to do the exact same thing</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>avg_co2 <span class="ot">&lt;-</span> co2[[<span class="st">"average"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="page-break-after: always;"></div>
<p>Print out the vector avg_co2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>avg_co2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 315.70 317.45 317.51 317.24 315.86 314.93 313.20 312.43 313.33 314.67
 [11] 315.58 316.48 316.65 317.72 318.29 318.15 316.54 314.80 313.84 313.33
 [21] 314.81 315.58 316.43 316.98 317.58 319.03 320.04 319.59 318.18 315.90
 [31] 314.17 313.83 315.00 316.19 316.89 317.70 318.54 319.48 320.58 319.77
 [41] 318.57 316.79 314.99 315.31 316.10 317.01 317.94 318.55 319.68 320.57
 [51] 321.02 320.62 319.61 317.40 316.25 315.42 316.69 317.70 318.74 319.07
 [61] 319.86 321.38 322.25 321.48 319.74 317.77 316.21 315.99 317.07 318.35
 [71] 319.57 320.01 320.74 321.84 322.26 321.89 320.44 318.69 316.70 316.87
 [81] 317.68 318.71 319.44 320.44 320.89 322.14 322.17 321.87 321.21 318.87
 [91] 317.81 317.30 318.87 319.42 320.62 321.60 322.39 323.70 324.08 323.75
[101] 322.38 320.36 318.64 318.10 319.78 321.03 322.33 322.50 323.04 324.42
[111] 325.00 324.09 322.54 320.92 319.25 319.39 320.73 321.96 322.57 323.15
[121] 323.89 325.02 325.57 325.36 324.14 322.11 320.33 320.25 321.32 322.89
[131] 324.00 324.42 325.63 326.66 327.38 326.71 325.88 323.66 322.38 321.78
[141] 322.86 324.12 325.06 325.98 326.93 328.13 328.08 327.67 326.34 324.69
[151] 323.10 323.06 324.01 325.13 326.17 326.68 327.17 327.79 328.93 328.57
[161] 327.36 325.43 323.36 323.56 324.80 326.01 326.77 327.63 327.75 329.72
[171] 330.07 329.09 328.04 326.32 324.84 325.20 326.50 327.55 328.55 329.56
[181] 330.30 331.50 332.48 332.07 330.87 329.31 327.51 327.18 328.16 328.64
[191] 329.35 330.71 331.48 332.65 333.19 332.20 331.07 329.15 327.33 327.28
[201] 328.31 329.58 330.73 331.46 331.94 333.11 333.95 333.42 331.97 329.95
[211] 328.50 328.36 329.38 330.62 331.56 332.74 333.36 334.74 334.72 333.98
[221] 333.08 330.68 328.96 328.72 330.16 331.62 332.68 333.17 334.96 336.14
[231] 336.93 336.17 334.88 332.56 331.29 331.28 332.46 333.60 334.94 335.26
[241] 336.66 337.69 338.02 338.01 336.50 334.42 332.36 332.45 333.76 334.91
[251] 336.14 336.69 338.27 338.82 339.24 339.26 337.54 335.72 333.98 334.24
[261] 335.32 336.81 337.90 338.34 340.07 340.93 341.45 341.36 339.45 337.67
[271] 336.25 336.14 337.30 338.29 339.29 340.55 341.63 342.60 343.04 342.54
[281] 340.82 338.48 336.95 337.05 338.58 339.91 340.93 341.76 342.78 343.96
[291] 344.77 343.88 342.42 340.24 338.38 338.41 339.44 340.78 341.57 342.78
[301] 343.37 345.40 346.14 345.76 344.32 342.50 340.46 340.53 341.79 343.20
[311] 344.21 344.92 345.68 347.14 347.78 347.16 345.79 343.74 341.59 341.86
[321] 343.31 345.00 345.48 346.41 347.91 348.66 349.28 348.65 346.90 345.26
[331] 343.47 343.35 344.73 346.12 346.78 347.48 348.25 349.86 350.52 349.98
[341] 348.25 346.17 345.48 344.82 346.22 347.48 348.73 348.92 349.81 351.40
[351] 352.15 351.59 350.21 348.20 346.66 346.72 348.08 349.28 350.51 351.70
[361] 352.50 353.67 354.35 353.88 352.80 350.49 348.97 349.37 350.42 351.62
[371] 353.07 353.43 354.08 355.72 355.95 355.44 354.05 351.84 350.09 350.33
[381] 351.55 352.91 353.86 355.10 355.75 356.38 357.38 356.39 354.89 353.07
[391] 351.38 351.69 353.14 354.41 354.93 355.82 357.33 358.77 359.23 358.23
[401] 356.30 353.97 352.34 352.43 353.89 355.21 356.34 357.21 357.97 359.22
[411] 359.71 359.43 357.15 354.98 353.01 353.41 354.42 355.68 357.10 357.42
[421] 358.59 359.39 360.30 359.64 357.46 355.76 354.14 354.23 355.53 357.03
[431] 358.36 359.04 360.11 361.36 361.78 360.94 359.51 357.59 355.86 356.21
[441] 357.65 359.10 360.04 361.00 361.98 363.44 363.83 363.33 361.78 359.33
[451] 358.32 358.14 359.61 360.82 362.20 363.36 364.28 364.69 365.25 365.06
[461] 363.69 361.55 359.69 359.72 361.04 362.39 363.24 364.21 364.65 366.49
[471] 366.77 365.73 364.46 362.40 360.44 360.98 362.65 364.51 365.39 366.10
[481] 367.36 368.79 369.56 369.13 367.98 366.10 364.16 364.54 365.67 367.30
[491] 368.35 369.28 369.84 371.15 371.12 370.46 369.61 367.06 364.95 365.52
[501] 366.88 368.26 369.45 369.71 370.75 371.98 371.75 371.87 370.02 368.27
[511] 367.15 367.18 368.53 369.83 370.76 371.69 372.63 373.55 374.03 373.40
[521] 371.68 369.78 368.34 368.61 369.94 371.42 372.70 373.37 374.30 375.19
[531] 375.93 375.69 374.16 372.03 370.93 370.73 372.43 373.98 375.07 375.82
[541] 376.64 377.92 378.78 378.46 376.88 374.57 373.34 373.31 374.84 376.17
[551] 377.17 378.05 379.06 380.54 380.80 379.87 377.65 376.17 374.43 374.63
[561] 376.33 377.68 378.63 379.91 380.95 382.48 382.64 382.40 380.93 378.93
[571] 376.89 377.19 378.54 380.31 381.58 382.40 382.86 384.80 385.22 384.24
[581] 382.65 380.60 379.04 379.33 380.35 382.02 383.10 384.12 384.81 386.73
[591] 386.78 386.33 384.73 382.24 381.20 381.37 382.70 384.19 385.78 386.06
[601] 386.28 387.33 388.78 387.99 386.61 384.32 383.41 383.21 384.41 385.79
[611] 387.17 387.70 389.04 389.76 390.36 389.70 388.25 386.29 384.95 384.64
[621] 386.23 387.63 388.91 390.41 391.37 392.67 393.21 392.38 390.41 388.54
[631] 387.03 387.43 388.87 389.99 391.50 392.05 392.80 393.44 394.41 393.95
[641] 392.72 390.33 389.28 389.19 390.48 392.06 393.31 394.04 394.59 396.38
[651] 396.93 395.91 394.56 392.59 391.32 391.27 393.20 394.57 395.78 397.03
[661] 397.66 398.64 400.02 398.81 397.51 395.39 393.72 393.90 395.36 397.03
[671] 398.04 398.27 399.91 401.51 401.96 401.43 399.38 397.32 395.64 396.29
[681] 397.55 399.15 400.18 400.55 401.74 403.35 404.15 402.97 401.46 399.11
[691] 397.82 398.49 400.27 402.06 402.73 404.25 405.06 407.60 407.90 406.99
[701] 404.59 402.45 401.23 401.79 403.72 404.64 406.36 406.66 407.53 409.22
[711] 409.89 409.08 407.33 405.32 403.57 403.82 405.31 407.00 408.15 408.52
[721] 409.59 410.45 411.44 410.99 408.90 407.16 405.71 406.19 408.21 409.27
[731] 411.03 411.96 412.18 413.54 414.86 414.16 411.97 410.18 408.76 408.75
[741] 410.48 411.98 413.61 414.34 414.74 416.45 417.31 416.60 414.62 412.78
[751] 411.52 411.51 413.12 414.26 415.52 416.75 417.64 419.05 419.13 418.94
[761] 416.96</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<p>That’s a lot of numbers! You wouldn’t want to print all that in a report. Use the <code>summary()</code> function to get a more useful overview of the range of numbers in that vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(avg_co2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  312.4   329.4   353.4   356.4   380.5   419.1 </code></pre>
</div>
</div>
<p>Create a vector that expresses the Mauna Loa CO2 levels as a percentage of pre-industrial levels (280 ppm). Save it as a new vector in your environment and print out a summary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>prop_pre_industrial <span class="ot">&lt;-</span> <span class="dv">100</span><span class="sc">*</span>(<span class="dv">1</span> <span class="sc">-</span> (<span class="dv">280</span><span class="sc">/</span>avg_co2))</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(prop_pre_industrial)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  10.38   14.98   20.77   20.91   26.42   33.19 </code></pre>
</div>
</div>
<p>Let’s say you’re publishing a report about climate change and you want to have two versions of it for two different audiences. In one version, you want to report carbon dioxide concentration in parts per million. In the other, you want those numbers as a percentage of pre-industrial levels.</p>
<p>Use if/else blocks to print a summary of Mauna Loa CO2 levels, where the format (ppm or percentage) depends on the logical indicator included in the code chunk below. Make sure you get the expected output when percentage is TRUE, and when percentage is FALSE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>co2 <span class="ot">&lt;-</span> co2 <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop_pre_industrial =</span> <span class="dv">100</span><span class="sc">*</span>(<span class="dv">1</span> <span class="sc">-</span> (<span class="dv">280</span><span class="sc">/</span>average))</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>print_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">percentage =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(percentage <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"Mauna Loa CO2 concentrations (ppm)"</span>)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary</span>(df<span class="sc">$</span>average)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"Mauna Loa CO2 concentrations (as proportion of pre-industrial level: 280 ppm)"</span>)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary</span>(df<span class="sc">$</span>prop_pre_industrial)</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="fu">print_summary</span>(<span class="at">df =</span> co2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mauna Loa CO2 concentrations (ppm)"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  312.4   329.4   353.4   356.4   380.5   419.1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_summary</span>(<span class="at">df =</span> co2, <span class="at">percentage =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mauna Loa CO2 concentrations (as proportion of pre-industrial level: 280 ppm)"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  10.38   14.98   20.77   20.91   26.42   33.19 </code></pre>
</div>
</div>
<p>Look at the date columns in the co2 data frame (you can view the whole table by clicking on “co2” in your environment pane). The “date” column in a decimal date format. Search the web for a function within the lubridate package that can convert a decimal date into the standard date format. Use that function on the vector of decimal dates and print the result. Make sure you set the correct time zone for Hawaii (search the web for the 3-letter abbreviation of that time zone and use that string as the argument)!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>co2 <span class="ot">&lt;-</span> co2 <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_POSIXct =</span> <span class="fu">date_decimal</span>(date, <span class="at">tz =</span> <span class="st">"HST"</span>),</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_standard =</span> <span class="fu">as_date</span>(date_POSIXct)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>co2_dates <span class="ot">&lt;-</span> co2 <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, date_POSIXct, date_standard)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(co2_dates, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      date        date_POSIXct date_standard
1 1958.203 1958-03-15 23:39:07    1958-03-15
2 1958.288 1958-04-16 00:15:07    1958-04-16
3 1958.370 1958-05-16 00:19:26    1958-05-16
4 1958.455 1958-06-16 00:02:52    1958-06-16</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="question-3" class="level3">
<h3 class="anchored" data-anchor-id="question-3">Question 3</h3>
<p>Use a for loop to print out the result of multiplying the numbers 1-10 by 3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> numbers) {</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  numbers[i] <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">*</span> i</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  3  6  9 12 15 18 21 24 27 30</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="question-4" class="level3">
<h3 class="anchored" data-anchor-id="question-4">Question 4</h3>
<p>Use a while loop to do the same thing. It’s easy to accidentally create infinite loops; if your chunk takes more than a couple seconds to run, press the red square in the top right corner of the chunk to abort the loop.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="fu">length</span>(numbers)) {</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  numbers[i] <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">*</span> numbers[i]</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  3  6  9 12 15 18 21 24 27 30</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="question-5" class="level3">
<h3 class="anchored" data-anchor-id="question-5">Question 5</h3>
<p>If you haven’t created a GitHub account yet, do it now. Paste a link to your GitHub profile below:</p>
<p>https://github.com/EvalstacE</p>
</section>
<section id="question-6" class="level3">
<h3 class="anchored" data-anchor-id="question-6">Question 6</h3>
<p>You’re working on a group coding project with your classmates that’s due soon. After a weekend away from your computer, you open R Studio to start working. What is the first git command you should run?</p>
<p>I would run this in gitbash first:</p>
<ul>
<li><p><strong>git fetch origin</strong></p></li>
<li><p><strong>git log HEAD..origin/main –oneline</strong></p></li>
</ul>
<p>That will give me a list of my classmates’ commits and changes before pulling them in locally.</p>
<p>Then I would run this in gitbash if I want to make sure my local drive version is up to date with the online version:</p>
<ul>
<li><strong>git pull origin main</strong></li>
</ul>
<p>I could also use the “Pull” directly in RStudio instead of doing that through gitbash.</p>
</section>
<section id="question-7" class="level3">
<h3 class="anchored" data-anchor-id="question-7">Question 7</h3>
<p>You write some new code, save your Qmd file, commit your changes to your local repository, and then go eat dinner. While you’re eating, your teammate sends you a message asking where your new code is. What did you forget to do?</p>
<p><strong>You forgot to “Push”</strong> those changes after committing.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>